# Garlic OS 更新记录 (翻译)

原帖地址在 https://www.patreon.com/posts/76561333 。

## 2023-02-01 (1.0.2)

- 修正了在单核渲染的核心中使用快进时，屏幕卡死的问题
- GarlicOS 版本号升级为 `1.0.2`

## 2023-02-01 (1.0.1)

- `fake08` 核心 (pico-8) 现在默认使用线程渲染器 (速度更快)
- `fake08` 核心不再自动读取状态 (因为可能会崩溃)
- 关闭了 `fake08` 核心的休眠 / 恢复功能 (因为很多 pico-8 游戏会导致 RetroArch 死机, 在这种情况下需要让 reset 键能够退出)
- GarlicOS 版本号升级为 `1.0.1`

## 2023-02-01 (1.0.0)

- 默认禁用了线程渲染器, 以尽可能降低输入延迟 (除了 PS1 和街机游戏)
- 街机游戏默认使用双线性缩放器以节约 CPU 资源
- 更新了 `gpSP` (GBA) 核心
- 将 `iosched` 队列管理器从 `cfb` 切换为 `noop` 以提升文件操作的性能 (注: 疑为 `cfq`, 待考)
- 使用 hash 表提升了 MAME 文件解析的速度 (现在解析解析约 3000 个文件只需要约 2 秒)
- 修正了 `FBA2012` 文件夹的图标
- 选择游戏时按下 start 键将跳过读取状态 (注: 从头开始); 按下 A 键将读取状态 (注: 从上一次退出的地方继续)
- 在手动创建的核心配置中不保存音量, 以避免读取游戏时出现意外的音量变化
- 在手动创建的核心配置中不保存历史记录和 BIOS 的路径, 以解决拔出 TF2 卡后无法读取游戏的问题
- 加入了 `prboom_libretro` (DOOM) 的核心映射关系和图标
- 增加了 12 小时制的时钟样式 (AM/PM)
- GarlicOS 将在游戏退出和系统启动时尽量记住上一次的选择位置
- 在 GarlicOS 菜单中按下 menu 键, 将跳转到最近游戏列表
- 在 GarlicOS 菜单中长按 menu 键, 将跳转到主菜单
- 主菜单中的 "Main Menu" 文字替换为版本号
- GarlicOS 版本号是 `1.0.0`

## 28. January 2023

- 加入了一个双线性乘法缩放器 (感谢 eggs 的 NEON 缩放器代码)
- 将 `Bilinear4x NEON` 缩放器设置为默认缩放器 (这可以减少约 50% 的CPU 占用, 并且使图像更准确)
- 在所有双线性缩放器中保持纵横比
- 整数缩放器获得了不错的速度提升
- 当双线性乘法缩放器出现缓冲区溢出时，自动降级到下一档
- 改善了 GarlicOS 中, 最近游戏截图的渲染质量
- 调整了默认设置和核心设置, 尽可能使用新的缩放器
- 由于保守 CPU 调度器工作不太理想, 重新启用了手动超频/降频开关 (GarlicOS 菜单将总是使用 700MHz, 手动开关只影响游戏中的 CPU 频率)
- 游戏列表中不再显示隐藏的 Linux / MacOS 文件
- 增加了实时时钟支持 (RTC) (使用 start 键配置时钟, 按 B 或 start 键保存设置)
- 修正了 `MAME2003-Xtreme` 核心中 红/蓝通道错误的问题

## 2023-01-26

- 修正了 `MAME2003-Xtreme` 核心中的 `XRGB8888` 颜色转换器 (修正了 美国队长 和 复仇者联盟 等游戏中的效果)

## 2023-01-25

- 增加了 HDMI 音频的支持 (当前尚不完善, 需要在开始游戏前插好 HDMI 线, 游戏中请勿拔掉, 必须退出游戏在 GarlicOS 界面才能插拔)
- 在硬件加速的双线性缩放器中增加了降采样的支持 (这应该解决了双线性缩放器中超出屏幕的问题)
- `Normal4x` 过滤器加快了 25% (在选项中, 部分核心可用)
- `Normal2x` 现在是大多数核心的默认过滤器 (这可以占用最大的屏幕面积，同时提供尽可能锐利的像素)
- 修正了一处与背光有关的问题
- 为 `gambatte` 和 `gbSP` 核心强制使用最近邻缩放器 (因为 `gambatte` 核心会导致明显的闪烁, 而 `gpSP` 核心效果更好一些)
- 优化了快速存档的截图读取器 (显示截图更快一点)
- 降低了输入延迟
- 修正了 `MAME2003-Xtreme` 核心中的 `O1555RGB` 颜色转换器 (修正了 上尉密令 等游戏的效果)
- 在 `MAME2003-Xtreme` 核心中禁用了 `Normal2x` 过滤器 (因为效果的确不好)

## 2023-01-24

- 修正了在收藏菜单中删除最后一个游戏时崩溃的问题
- 修正了在最近游戏列表中出现的重复项目的问题
- 修正了一处游戏图片的路径错误, 这样从 OnionOS 拿过来的 TF2 就可以显示游戏图片了
- 游戏图片和截图现在使用双线性缩放, 以和默认设置保持一致
- 由于部分设备无法可靠地在 1.6 GHz 运行，将超频选项从 1.6 GHz 设置为 1.5 GHz
- 使用更保守的 CPU 调度器, 使 CPU 能够更平滑地在不同状态间切换 (在减少卡顿的情况下提升续航)
- 移除了手动超频 / 降频的功能，因为 CPU 调度器工作的不错
- 修正了一处游戏图片的路径错误
- 修正了一处无法读取带有单引号的文件的错误

## 2023-01-23

- 修改了电量计算公式, 电量显示会更精确 (但在这台设备上应该无法实现 100% 的精确)
- 包含 `$` 或 `!` 的文件可以正确读取了 (例如瓦里奥制造)
- 游戏图片现在从 `Roms/SystemName/Imgs/GameFileNameWithoutExtension.png` (之前的 `CFW/skin/games/SystemName/GameFileNameWithExtension.png` 仍然有效)
- 增加了一项 1.6GHz 的超频选项 (在上次的基础上 +300MHz)
- 增加了降频 / 超频的选项 (使用 SELECT 键切换, `--` 表示 500 MHz, `-` 表示 700 MHz, 默认值是 1 GHz , `+` 表示 1.3GHz, `++` 表示 1.6 GHz)
- 禁用了 CPU 热插拔功能, 以确认正在使用的核心不会在游戏中被禁用。(这可能减少一些线程重定位导致的卡顿)
- 修正了屏幕的时序 (从 56Hz 调整至 60Hz)

## 2023-01-22

- 修正了一处导致最近游戏列表有时需要删除两次才能删掉的 bug
- 线性缩放器现在使用液晶屏的硬件加速, 这修正了 "保持纵横比" 的问题，并且修正了一些画面撕裂问题
- 硬件加速的线性缩放器现在是每个核心的默认缩放器。这意味着大约 20% 的性能提升，以及解决了很多撕裂问题
- `LQ2x` 过滤器现在对所有核心默认开启，但对 `PCSX-ReARMed` 和 `DOXBox Pure` 核心使用最邻近缩放器，以达到更好的视觉效果
- 由于字体大小不一致，禁用了 RetroArch 通知
- 为了加快保存过程，关闭了保存时的压缩

## 2023-01-21

- 将 CPU 从 1.0 GHz 超频至 1.3 GHz
- 当 < 800 MHz 时, 提升了 0.025 V 的 CPU 电压, 以修正一些卡顿现象
- 菜单快捷键时间从 150 ms 延长至 250 ms, 以修正有时需要点击两次 MENU 键的问题
- 延长了滚动动画中的抑制时间, 使十字键在游戏列表中移动时更准确
- 优化了主菜单的渲染器 (空闲时减少了 60% 的 CPU 占用率)
- 在 `dosbox_pure` 核心中增加了自动开启最大 CPU 周期的功能, 以提升某些游戏的速度
- 重新启用音频同步
- 主菜单现在以 32 位色渲染, 未来还将引入对 RetroArch 的 32 位色的支持
- 修正了一处导致最近游戏列表中出现重复游戏的问题
- 修正了一处导致存放在 TF2 中的游戏无法休眠 / 恢复的问题

## 2023-01-19

- 修正了当文件名以 `(`, `[` 或 `.` 开头的崩溃问题
- 修正了一处导致系统菜单中出现空白分页的问题
- 修改了主菜单中重复按键的代码以更好地处理垂直同步
- 加入了 `puae_2021` 核心并将其作为 `AMIGA` 和 `AMIGACD` 的默认核心 (提升了速度，但还不够快)
- 在滚动动画中加入了 100ms 的启动时间 (以防止误触) （住: 有用户反馈有约半秒的卡顿）
- 载入游戏列表**快多了**
- 支持游戏图片中的遮罩功能 (`CFW/skin/game-overlay.png`, 请谨慎地使用 Alpha 半透明，因为非常费 CPU)
- 加入了隐藏帮助的文本选项 (`CFW/skin/settings.json`)

## 2023-01-18

- 修正了 GarlicOS 主菜单的帧数限制
- 修正了 `dosbox_pure` 核心 (支持 DOS 游戏)
- 在游戏中按下菜单键将切换到 "最近的游戏" 页面 (注: 而不是切换到 GarlicOS 的主页面)
- 退出 RetroArch 屏幕时, 将记忆上一次 GarlicOS 选中的项目
- RetroArch 可以记忆音量设置了

## 2023-01-17

- 开启 `block_sram_overwrite` 使保存功能更稳定
- 修正了在快捷菜单中切换保存时崩溃的错误
- 修正了游戏中的透明效果
- GarlicOS 的主菜单现在使用双重缓冲以减少撕裂
- 重新编译了 `dosbox_pure` 核心，希望能够解决色彩空间的问题
- 增加了两个更低的屏幕亮度选项
- 主题可以关闭 "Main Menu" 文字，仅开启 logo

## 2023-01-16

- 固定使用核心 3 和 4 双线程进行临近插值缩放
- 固定使用核心 3 和 4 双线程进行半线性缩放 (Bresenham)
- 为了修正某些核心中出现的声音卡顿，关闭了声音同步

TODO: 其他翻译暂未完成，请参阅 [英文版](./changelog.en_US.md) 或原文。
